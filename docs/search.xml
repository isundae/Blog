<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ç¨‹åºè®¾è®¡çš„ SOLID åŸåˆ™</title>
      <link href="/typescript/SOLID/"/>
      <url>/typescript/SOLID/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¨‹åºè®¾è®¡çš„-SOLID-åŸåˆ™ğŸ¯"><a href="#ç¨‹åºè®¾è®¡çš„-SOLID-åŸåˆ™ğŸ¯" class="headerlink" title="ç¨‹åºè®¾è®¡çš„ SOLID åŸåˆ™ğŸ¯"></a>ç¨‹åºè®¾è®¡çš„ SOLID åŸåˆ™ğŸ¯</h1><p>SOLID åŸåˆ™å…¶å®æ˜¯ç”¨æ¥æŒ‡å¯¼è½¯ä»¶è®¾è®¡çš„ï¼Œå®ƒä¸€å…±åˆ†ä¸ºäº”æ¡è®¾è®¡åŸåˆ™ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ol><li>å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰</li><li>å¼€é—­åŸåˆ™ï¼ˆOCPï¼‰</li><li>é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLSPï¼‰</li><li>æ¥å£éš”ç¦»åŸåˆ™ï¼ˆISPï¼‰</li><li>ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDIPï¼‰</li></ol><h2 id="å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰ğŸ¯"><a href="#å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰ğŸ¯" class="headerlink" title="å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰ğŸ¯"></a>å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰ğŸ¯</h2><blockquote><p>æ ¸å¿ƒæ€æƒ³ï¼šç±»çš„èŒè´£åº”è¯¥å•ä¸€ï¼Œä¸è¦æ‰¿æ‹…è¿‡å¤šçš„èŒè´£ã€‚</p></blockquote><p>Â Â Â Â </p><p>Â Â Â Â å…ˆçœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼Œä¸º Book åˆ›å»ºäº†ä¸€ä¸ªç±»ï¼Œä½†æ˜¯ç±»ä¸­å´æ‰¿æ‹…äº†å¤šä¸ªèŒè´£ï¼Œæ¯”å¦‚æŠŠä¹¦ä¿å­˜ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">title</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">author</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">description</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">pages</span>: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// constructor and other methods</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">saveToFile</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="comment">// some fs.write method to save book to file</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Â Â Â Â éµå¾ªå•ä¸€èŒè´£åŸåˆ™ï¼Œåº”è¯¥åˆ›å»ºä¸¤ä¸ªç±»ï¼Œåˆ†åˆ«è´Ÿè´£ä¸åŒçš„äº‹æƒ…ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">title</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">author</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">description</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">pages</span>: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// constructor and other methods</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Persistence</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">saveToFile</span>(<span class="attr">book</span>: <span class="title class_">Book</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="comment">// some fs.write method to save book to file</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å¥½å¤„ï¼šé™ä½ç±»çš„å¤æ‚åº¦ã€æé«˜å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§ã€æ‰©å±•æ€§ã€æœ€å¤§é™åº¦çš„å‡å°‘æ½œåœ¨çš„å‰¯ä½œç”¨ã€‚</p></blockquote><h2 id="å¼€é—­åŸåˆ™ï¼ˆOCPï¼‰ğŸ¯"><a href="#å¼€é—­åŸåˆ™ï¼ˆOCPï¼‰ğŸ¯" class="headerlink" title="å¼€é—­åŸåˆ™ï¼ˆOCPï¼‰ğŸ¯"></a>å¼€é—­åŸåˆ™ï¼ˆOCPï¼‰ğŸ¯</h2><blockquote><p>æ ¸å¿ƒæ€æƒ³ï¼šç±»åº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œä½†å¯¹ä¿®æ”¹å…³é—­ã€‚ç®€å•ç†è§£å°±æ˜¯å½“åˆ«äººè¦ä¿®æ”¹è½¯ä»¶åŠŸèƒ½çš„æ—¶å€™ï¼Œä¸èƒ½è®©ä»–ä¿®æ”¹æˆ‘ä»¬åŸæœ‰ä»£ç ï¼Œå°½é‡è®©ä»–åœ¨åŸæœ‰çš„åŸºç¡€ä¸Šåšæ‰©å±•ã€‚</p></blockquote><p>Â Â Â Â </p><p>Â Â Â Â ä¸‹é¢è¿™æ®µå†™çš„ä¸å¤ªå¥½çš„ä»£ç ï¼Œæˆ‘ä»¬å•ç‹¬å°è£…äº†ä¸€ä¸ª AreaCalculator ç±»æ¥è´Ÿè´£è®¡ç®— Rectangle å’Œ Circle ç±»çš„é¢ç§¯ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬åç»­è¦å†æ·»åŠ ä¸€ä¸ªå½¢çŠ¶ï¼Œæˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»ï¼ŒåŒæ—¶æˆ‘ä»¬ä¹Ÿè¦å»ä¿®æ”¹ AreaCalculator æ¥è®¡ç®—æ–°ç±»çš„é¢ç§¯ï¼Œè¿™è¿åäº†å¼€é—­åŸåˆ™ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">width</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">height</span>: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">width: <span class="built_in">number</span>, height: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">width</span> = width;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">height</span> = height;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">radius</span>: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">radius: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">radius</span> = radius;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AreaCalculator</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">calculateRectangleArea</span>(<span class="attr">rectangle</span>: <span class="title class_">Rectangle</span>): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> rectangle.<span class="property">width</span> * rectangle.<span class="property">height</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">calculateCircleArea</span>(<span class="attr">circle</span>: <span class="title class_">Circle</span>): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="property">PI</span> * (circle.<span class="property">radius</span> * circle.<span class="property">radius</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Â Â Â Â ä¸ºäº†éµå¾ªå¼€é—­åŸåˆ™ï¼Œæˆ‘ä»¬åªéœ€è¦æ·»åŠ ä¸€ä¸ªåä¸º Shape çš„æ¥å£ï¼Œæ¯ä¸ªå½¢çŠ¶ç±»ï¼ˆçŸ©å½¢ã€åœ†å½¢ç­‰ï¼‰éƒ½å¯ä»¥é€šè¿‡å®ç°å®ƒæ¥ä¾èµ–è¯¥æ¥å£ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥å°† AreaCalculator ç±»ç®€åŒ–ä¸ºä¸€ä¸ªå¸¦æœ‰å‚æ•°çš„å‡½æ•°ï¼Œæ¯å½“åˆ›å»ºä¸€ä¸ªæ–°çš„å½¢çŠ¶ç±»ï¼Œéƒ½å¿…é¡»å®ç°è¿™ä¸ªå‡½æ•°ï¼Œè¿™æ ·å°±ä¸éœ€è¦ä¿®æ”¹åŸæœ‰çš„ç±»äº†ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">  <span class="title function_">calculateArea</span>(): <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span> <span class="keyword">implements</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">width</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">height</span>: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">width: <span class="built_in">number</span>, height: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">width</span> = width;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">height</span> = height;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">calculateArea</span>(): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">width</span> * <span class="variable language_">this</span>.<span class="property">height</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span> <span class="keyword">implements</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">radius</span>: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">radius: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">radius</span> = radius;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">calculateArea</span>(): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="property">PI</span> * (<span class="variable language_">this</span>.<span class="property">radius</span> * <span class="variable language_">this</span>.<span class="property">radius</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AreaCalculator</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">calculateArea</span>(<span class="attr">shape</span>: <span class="title class_">Shape</span>): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> shape.<span class="title function_">calculateArea</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLSPï¼‰ğŸ¯"><a href="#é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLSPï¼‰ğŸ¯" class="headerlink" title="é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLSPï¼‰ğŸ¯"></a>é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLSPï¼‰ğŸ¯</h2><blockquote><p>æ ¸å¿ƒæ€æƒ³ï¼šåœ¨ä½¿ç”¨åŸºç±»çš„çš„åœ°æ–¹å¯ä»¥ä»»æ„ä½¿ç”¨å…¶å­ç±»ï¼Œèƒ½ä¿è¯å­ç±»å®Œç¾æ›¿æ¢åŸºç±»ã€‚ç®€å•ç†è§£å°±æ˜¯æ‰€æœ‰çˆ¶ç±»èƒ½å‡ºç°çš„åœ°æ–¹ï¼Œå­ç±»å°±å¯ä»¥å‡ºç°ï¼Œå¹¶ä¸”æ›¿æ¢äº†ä¹Ÿä¸ä¼šå‡ºç°ä»»ä½•é”™è¯¯ã€‚</p></blockquote><p>Â Â Â Â è¦æ±‚å­ç±»çš„æ‰€æœ‰ç›¸åŒæ–¹æ³•ï¼Œéƒ½å¿…é¡»éµå¾ªçˆ¶ç±»çš„çº¦å®šï¼Œå¦åˆ™å½“çˆ¶ç±»æ›¿æ¢ä¸ºå­ç±»æ—¶å°±ä¼šå‡ºé”™ã€‚</p><p>Â Â Â Â å…ˆæ¥çœ‹çœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼ŒSquare ç±»æ‰©å±•äº† Rectangle ç±»ã€‚ä½†æ˜¯è¿™ä¸ªæ‰©å±•æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œå› ä¸ºé€šè¿‡è¦†ç›–å®½åº¦å’Œé«˜åº¦å±æ€§æ¥æ”¹å˜äº†åŸæœ‰çš„é€»è¾‘ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">width</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">height</span>: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">width: <span class="built_in">number</span>, height: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">width</span> = width;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">height</span> = height;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">calculateArea</span>(): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">width</span> * <span class="variable language_">this</span>.<span class="property">height</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Square</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Rectangle</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">_width</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">_height</span>: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">width: <span class="built_in">number</span>, height: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(width, height);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_width</span> = width;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_height</span> = height;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Â Â Â Â éµå¾ªé‡Œæ°æ›¿æ¢åŸåˆ™ï¼Œä¸éœ€è¦è¦†ç›–åŸºç±»çš„å±æ€§ï¼Œè€Œæ˜¯ç›´æ¥åˆ é™¤æ‰ Square ç±»å¹¶ï¼Œå°†å®ƒçš„é€»è¾‘å¸¦åˆ° Rectangle ç±»ï¼Œè€Œä¸”ä¹Ÿä¸æ”¹å˜å…¶ç”¨é€”ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">width</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">height</span>: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">width: <span class="built_in">number</span>, height: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">width</span> = width;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">height</span> = height;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">calculateArea</span>(): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">width</span> * <span class="variable language_">this</span>.<span class="property">height</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">isSquare</span>(): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">width</span> === <span class="variable language_">this</span>.<span class="property">height</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Â Â Â Â å¥½å¤„ï¼šå¢å¼ºç¨‹åºçš„å¥å£®æ€§ï¼Œå³ä½¿å¢åŠ äº†å­ç±»ï¼ŒåŸæœ‰çš„å­ç±»è¿˜å¯ä»¥ç»§ç»­è¿è¡Œã€‚</p><h2 id="æ¥å£éš”ç¦»åŸåˆ™ï¼ˆISPï¼‰ğŸ¯"><a href="#æ¥å£éš”ç¦»åŸåˆ™ï¼ˆISPï¼‰ğŸ¯" class="headerlink" title="æ¥å£éš”ç¦»åŸåˆ™ï¼ˆISPï¼‰ğŸ¯"></a>æ¥å£éš”ç¦»åŸåˆ™ï¼ˆISPï¼‰ğŸ¯</h2><blockquote><p>æ ¸å¿ƒæ€æƒ³ï¼šç±»é—´çš„ä¾èµ–å…³ç³»åº”è¯¥å»ºç«‹åœ¨æœ€å°çš„æ¥å£ä¸Šã€‚ç®€å•ç†è§£å°±æ˜¯æ¥å£çš„å†…å®¹ä¸€å®šè¦å°½å¯èƒ½åœ°å°ï¼Œèƒ½æœ‰å¤šå°å°±å¤šå°ã€‚æˆ‘ä»¬è¦ä¸ºå„ä¸ªç±»å»ºç«‹ä¸“ç”¨çš„æ¥å£ï¼Œè€Œä¸è¦è¯•å›¾å»å»ºç«‹ä¸€ä¸ªå¾ˆåºå¤§çš„æ¥å£ä¾›æ‰€æœ‰ä¾èµ–å®ƒçš„ç±»å»è°ƒç”¨ã€‚</p></blockquote><p>Â Â Â Â çœ‹ä¸‹é¢çš„ä»£ç ï¼Œæœ‰ä¸€ä¸ªåä¸º Troll çš„ç±»ï¼Œå®ƒå®ç°äº†ä¸€ä¸ªåä¸º Character çš„æ¥å£ï¼Œä½†æ˜¯ Troll æ—¢ä¸ä¼šæ¸¸æ³³ä¹Ÿä¸ä¼šè¯´è¯ï¼Œæ‰€ä»¥å®ƒä¼¼ä¹ä¸å¤ªé€‚åˆå®ç°æˆ‘ä»¬çš„æ¥å£ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Character</span> &#123;</span><br><span class="line">  <span class="title function_">shoot</span>(): <span class="built_in">void</span>;</span><br><span class="line">  <span class="title function_">swim</span>(): <span class="built_in">void</span>;</span><br><span class="line">  <span class="title function_">talk</span>(): <span class="built_in">void</span>;</span><br><span class="line">  <span class="title function_">dance</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Troll</span> <span class="keyword">implements</span> <span class="title class_">Character</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">shoot</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="comment">// some method</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">swim</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="comment">// a troll can&#x27;t swim</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">talk</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="comment">// a troll can&#x27;t talk</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">dance</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="comment">// some method</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Â Â Â Â éµå¾ªæ¥å£éš”ç¦»åŸåˆ™ï¼Œåˆ é™¤ Character æ¥å£å¹¶å°†å®ƒçš„åŠŸèƒ½æ‹†åˆ†ä¸ºå››ä¸ªæ¥å£ï¼Œç„¶å Troll ç±»åªéœ€è¦ä¾èµ–äºæˆ‘ä»¬å®é™…éœ€è¦çš„è¿™äº›æ¥å£ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Talker</span> &#123;</span><br><span class="line">  <span class="title function_">talk</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Shooter</span> &#123;</span><br><span class="line">  <span class="title function_">shoot</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Swimmer</span> &#123;</span><br><span class="line">  <span class="title function_">swim</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Dancer</span> &#123;</span><br><span class="line">  <span class="title function_">dance</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Troll</span> <span class="keyword">implements</span> <span class="title class_">Shooter</span>, <span class="title class_">Dancer</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">shoot</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="comment">// some method</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">dance</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="comment">// some method</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDIPï¼‰ğŸ¯"><a href="#ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDIPï¼‰ğŸ¯" class="headerlink" title="ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDIPï¼‰ğŸ¯"></a>ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDIPï¼‰ğŸ¯</h2><blockquote><p>æ ¸å¿ƒæ€æƒ³ï¼šä¾èµ–ä¸€ä¸ªæŠ½è±¡çš„æœåŠ¡æ¥å£ï¼Œè€Œä¸æ˜¯å»ä¾èµ–ä¸€ä¸ªå…·ä½“çš„æœåŠ¡æ‰§è¡Œè€…ï¼Œä»ä¾èµ–å…·ä½“å®ç°è½¬å‘åˆ°ä¾èµ–æŠ½è±¡æ¥å£ï¼Œå€’ç½®è¿‡æ¥ã€‚</p></blockquote><p>Â Â Â Â çœ‹çœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼Œæœ‰ä¸€ä¸ª SoftwareProject ç±»ï¼Œå®ƒåˆå§‹åŒ–äº† FrontendDeveloper å’Œ BackendDeveloper ç±»ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">FrontendDeveloper</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">writeHtmlCode</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="comment">// some method</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BackendDeveloper</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">writeTypeScriptCode</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="comment">// some method</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SoftwareProject</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">frontendDeveloper</span>: <span class="title class_">FrontendDeveloper</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">backendDeveloper</span>: <span class="title class_">BackendDeveloper</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">frontendDeveloper</span> = <span class="keyword">new</span> <span class="title class_">FrontendDeveloper</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">backendDeveloper</span> = <span class="keyword">new</span> <span class="title class_">BackendDeveloper</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">createProject</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">frontendDeveloper</span>.<span class="title function_">writeHtmlCode</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">backendDeveloper</span>.<span class="title function_">writeTypeScriptCode</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Â Â Â Â éµå¾ªä¾èµ–å€’ç½®åŸåˆ™ï¼Œåˆ›å»ºä¸€ä¸ª Developer æ¥å£ï¼Œç”±äº FrontendDeveloper å’Œ BackendDeveloper æ˜¯ç›¸ä¼¼çš„ç±»ï¼Œå®ƒä»¬éƒ½ä¾èµ–äº Developer æ¥å£ã€‚</p><p>Â Â Â Â ä¸éœ€è¦åœ¨ SoftwareProject ç±»ä¸­ä»¥å•ä¸€æ–¹å¼åˆå§‹åŒ– FrontendDeveloper å’Œ BackendDeveloperï¼Œè€Œæ˜¯å°†å®ƒä»¬ä½œä¸ºä¸€ä¸ªåˆ—è¡¨æ¥éå†å®ƒä»¬ï¼Œåˆ†åˆ«è°ƒç”¨æ¯ä¸ª develop() æ–¹æ³•ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Developer</span> &#123;</span><br><span class="line">  <span class="title function_">develop</span>(): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FrontendDeveloper</span> <span class="keyword">implements</span> <span class="title class_">Developer</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">develop</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">writeHtmlCode</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">writeHtmlCode</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="comment">// some method</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BackendDeveloper</span> <span class="keyword">implements</span> <span class="title class_">Developer</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">develop</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">writeTypeScriptCode</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">writeTypeScriptCode</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="comment">// some method</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SoftwareProject</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">developers</span>: <span class="title class_">Developer</span>[] = []</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">createProject</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">developers</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">developer: Developer</span>) =&gt;</span> &#123;</span><br><span class="line">      developer.<span class="title function_">develop</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> softwareProject = <span class="keyword">new</span> <span class="title class_">SoftwareProject</span>()</span><br><span class="line">softwareProject.<span class="property">developers</span> = [<span class="keyword">new</span> <span class="title class_">FrontendDeveloper</span>(), <span class="keyword">new</span> <span class="title class_">BackendDeveloper</span>()]</span><br><span class="line">softwareProject.<span class="title function_">createProject</span>()</span><br></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Developer</span> &#123;</span><br><span class="line">  <span class="title function_">develop</span>(): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FrontendDeveloper</span> <span class="keyword">implements</span> <span class="title class_">Developer</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">develop</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">writeHtmlCode</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">writeHtmlCode</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="comment">// some method</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BackendDeveloper</span> <span class="keyword">implements</span> <span class="title class_">Developer</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">develop</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">writeTypeScriptCode</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">writeTypeScriptCode</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="comment">// some method</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SoftwareProject</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">developers</span>: <span class="title class_">Developer</span>[] = []</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">...developers: Developer[]</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">developers</span>.<span class="title function_">push</span>(...developers)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">createProject</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">developers</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">developer: Developer</span>) =&gt;</span> &#123;</span><br><span class="line">      developer.<span class="title function_">develop</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> softwareProject = <span class="keyword">new</span> <span class="title class_">SoftwareProject</span>(</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">FrontendDeveloper</span>(),</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">BackendDeveloper</span>()</span><br><span class="line">).<span class="title function_">createProject</span>()</span><br></pre></td></tr></table></figure><p>Â Â Â Â å¥½å¤„ï¼šå®ç°æ¨¡å—é—´çš„æ¾è€¦åˆï¼Œæ›´åˆ©äºå¤šæ¨¡å—å¹¶è¡Œå¼€å‘ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> typescript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> typescript </tag>
            
            <tag> ç¨‹åºè®¾è®¡ </tag>
            
            <tag> SOLID </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Koa2æ¡†æ¶åŸç†åŠå®ç°</title>
      <link href="/typescript/Koa/"/>
      <url>/typescript/Koa/</url>
      
        <content type="html"><![CDATA[<h1 id="Koa2æ¡†æ¶åŸç†åŠå®ç°"><a href="#Koa2æ¡†æ¶åŸç†åŠå®ç°" class="headerlink" title="Koa2æ¡†æ¶åŸç†åŠå®ç°"></a>Koa2æ¡†æ¶åŸç†åŠå®ç°</h1><p>Â Â Â Â <a href="https://koa.bootcss.com/">Koa2</a>æ˜¯ä¸€ä¸ªåŸºäºNodeå®ç°çš„Webæ¡†æ¶ï¼Œç‰¹ç‚¹æ˜¯ä¼˜é›…ã€ç®€æ´ã€å¥å£®ã€ä½“ç§¯å°ã€è¡¨ç°åŠ›å¼ºã€‚å®ƒæ‰€æœ‰çš„åŠŸèƒ½é€šè¿‡æ’ä»¶çš„å½¢å¼æ¥å®ç°ã€‚</p><p>Â Â Â Â ä¸‹é¢è‡ªå·±å®ç°ä¸€ä¸ªç®€å•çš„Koaï¼Œé€šè¿‡è¿™ç§æ–¹å¼æ¥æ·±å…¥ç†è§£KoaåŸç†ï¼Œå°¤å…¶æ˜¯ä¸­é—´ä»¶éƒ¨åˆ†çš„ç†è§£ã€‚Koaçš„å…·ä½“å®ç°å¯ä»¥çœ‹çš„<a href="https://github.com/koajs/koa">koaçš„æºç </a>ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// koa çš„ç®€å•ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Koa</span> <span class="keyword">from</span> <span class="string">&#x27;koa&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Koa</span>()</span><br><span class="line"><span class="keyword">const</span> port = <span class="number">3000</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">ctx</span>) =&gt;</span> &#123;</span><br><span class="line">  ctx.<span class="property">body</span> = <span class="string">&#x27;hello koa&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(port, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`server is running at Http://localhost<span class="subst">$&#123;port&#125;</span>`</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>Â Â Â Â å¯åŠ¨åº”ç”¨ï¼Œæµè§ˆå™¨ä¸­æ‰“å¼€ <a href="http://localhost:3000/">http://localhost:3000/</a></p><p>Â Â Â Â é€šè¿‡ä¸Šé¢çš„ä»£ç ï¼Œå¦‚æœè¦å®ç°koaï¼Œéœ€è¦å®ç°ä¸‰ä¸ªæ¨¡å—ï¼Œåˆ†åˆ«æ˜¯httpçš„å°è£…ï¼Œctxå¯¹è±¡çš„æ„å»ºï¼Œä¸­é—´ä»¶æœºåˆ¶çš„å®ç°ï¼Œå½“ç„¶koaè¿˜å®ç°äº†é”™è¯¯æ•è·å’Œé”™è¯¯å¤„ç†ã€‚</p><h2 id="å°è£…httpæ¨¡å—"><a href="#å°è£…httpæ¨¡å—" class="headerlink" title="å°è£…httpæ¨¡å—"></a>å°è£…httpæ¨¡å—</h2><p>Â Â Â Â é€šè¿‡é˜…è¯»Koa2çš„<a href="https://links.jianshu.com/go?to=https://github.com/koajs/koa">æºç </a>å¯çŸ¥Koaæ˜¯é€šè¿‡å°è£…åŸç”Ÿçš„node httpæ¨¡å—ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// server.js</span></span><br><span class="line"><span class="keyword">import</span> http <span class="keyword">from</span> <span class="string">&#x27;http&#x27;</span></span><br><span class="line"><span class="keyword">const</span> port = <span class="number">3000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = http</span><br><span class="line">  .<span class="title function_">createServer</span>(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">end</span>(<span class="string">&#x27;hello nodejs&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">listen</span>(port, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`server is running at http://localhost:<span class="subst">$&#123;port&#125;</span>`</span>)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><p>Â Â Â Â ä»¥ä¸Šæ˜¯ä½¿ç”¨Node.jsåˆ›å»ºä¸€ä¸ªHTTPæœåŠ¡çš„ä»£ç ç‰‡æ®µï¼Œå…³é”®æ˜¯ä½¿ç”¨httpæ¨¡å—ä¸­çš„createServer()æ–¹æ³•ï¼Œæ¥ä¸‹æ¥å¯¹ä¸Šé¢è¿™é¢è¿™éƒ¨åˆ†è¿‡ç¨‹è¿›è¡Œä¸€ä¸ªå°è£…ã€‚</p><p>Â Â Â Â åˆ›å»ºapplication.jsï¼Œå¹¶åˆ›å»ºä¸€ä¸ªApplicationç±»ç”¨äºåˆ›å»ºKoaå®ä¾‹ã€‚</p><p>Â Â Â Â é€šè¿‡åˆ›å»ºuse()æ–¹æ³•æ¥æ³¨å†Œä¸­é—´ä»¶å’Œå›è°ƒå‡½æ•°ã€‚</p><p>Â Â Â Â é€šè¿‡listen()æ–¹æ³•å¼€å¯æœåŠ¡ç›‘å¬å®ä¾‹ï¼Œå¹¶ä¼ å…¥use()æ–¹æ³•æ³¨å†Œçš„å›è°ƒå‡½æ•°ã€‚</p><p>å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// application.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> http <span class="keyword">from</span> <span class="string">&#x27;http&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">callback</span> = <span class="function">() =&gt;</span> &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">use</span>(<span class="params">callback</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">callback</span> = callback</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">listen</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">    http</span><br><span class="line">      .<span class="title function_">createServer</span>(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">callback</span>(req, res)</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">listen</span>(...args)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Â Â Â Â æ¥ä¸‹æ¥åˆ›å»ºä¸€ä¸ªserver.jsï¼Œå¼•å…¥application.jsè¿›è¡Œæµ‹è¯•</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// server.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">MiniKoa</span> <span class="keyword">from</span> <span class="string">&#x27;./application.js&#x27;</span></span><br><span class="line"><span class="keyword">const</span> port = <span class="number">3000</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">MiniKoa</span>()</span><br><span class="line">app</span><br><span class="line"> .<span class="title function_">use</span>(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line"> res.<span class="title function_">end</span>(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line"> &#125;)</span><br><span class="line"> .<span class="title function_">listen</span>(port, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`server is running at http://localhost:<span class="subst">$&#123;port&#125;</span>`</span>)</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure><p>Â Â Â Â å¯åŠ¨åï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <a href="http://localhost:3000/">http://localhost:3000/</a> å°±èƒ½çœ‹åˆ°æ˜¾ç¤ºâ€hello worldâ€ã€‚è¿™æ ·å°±å®Œæˆhttp serverçš„ç®€å•å°è£…äº†ã€‚</p><h2 id="æ„é€ ctxå¯¹è±¡"><a href="#æ„é€ ctxå¯¹è±¡" class="headerlink" title="æ„é€ ctxå¯¹è±¡"></a>æ„é€ ctxå¯¹è±¡</h2><p>Â Â Â Â Koa çš„ Context æŠŠ Node çš„ Request å¯¹è±¡å’Œ Response å¯¹è±¡å°è£…åˆ°å•ä¸ªå¯¹è±¡ä¸­ï¼Œå¹¶ä¸”æš´éœ²ç»™ä¸­é—´ä»¶ç­‰å›è°ƒå‡½æ•°ã€‚æ¯”å¦‚è·å– urlï¼Œå°è£…ä¹‹å‰é€šè¿‡req.urlçš„æ–¹å¼è·å–ï¼Œå°è£…ä¹‹ååªéœ€è¦ctx.urlå°±å¯ä»¥è·å–ã€‚å› æ­¤éœ€è¦è¾¾åˆ°ä»¥ä¸‹æ•ˆæœï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="keyword">async</span> ctx =&gt; &#123;</span><br><span class="line">  ctx                             <span class="comment">// è¿™æ˜¯ Context</span></span><br><span class="line">  ctx.<span class="property">request</span>             <span class="comment">// è¿™æ˜¯ koa Request</span></span><br><span class="line">  ctx.<span class="property">response</span>             <span class="comment">// è¿™æ˜¯ koa Response</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="JavaScript-çš„-getter-å’Œ-setter"><a href="#JavaScript-çš„-getter-å’Œ-setter" class="headerlink" title="JavaScript çš„ getter å’Œ setter"></a>JavaScript çš„ getter å’Œ setter</h3><p>Â Â Â Â åœ¨æ­¤ä¹‹å‰ï¼Œéœ€è¦äº†è§£ setter å’Œ getter å±æ€§ï¼Œé€šè¿‡ setter å’Œ getter å±æ€§ï¼Œå¯ä»¥è‡ªå®šä¹‰å±æ€§çš„ç‰¹æ€§ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// test.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">  <span class="attr">_name</span>: <span class="string">&#x27;old name&#x27;</span>,</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">name</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_name</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">set</span> <span class="title function_">name</span>(<span class="params">val</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---ä¿®æ”¹nameçš„å€¼---&#x27;</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_name</span> = val</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">                                                            <span class="comment">// è¾“å‡ºï¼š</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">name</span>)      <span class="comment">// old name</span></span><br><span class="line">person.<span class="property">name</span> = <span class="string">&#x27;new name&#x27;</span>      <span class="comment">// ---ä¿®æ”¹nameçš„å€¼---</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">name</span>)      <span class="comment">// new name</span></span><br></pre></td></tr></table></figure><h3 id="æ„é€ -context"><a href="#æ„é€ -context" class="headerlink" title="æ„é€  context"></a>æ„é€  context</h3><p>Â Â Â Â ä½¿ç”¨ getter å’Œ setter æ¥æ„é€  context:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// application.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> http <span class="keyword">from</span> <span class="string">&#x27;http&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// this.callback = () =&gt; &#123;&#125;</span></span><br><span class="line">    <span class="comment">// æŠŠ contextã€request å’Œ response æŒ‚è½½åˆ° Application é‡Œé¢</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">context</span> = context</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">request</span> = request</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">response</span> = response</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">use</span>(<span class="params">callback</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">callback</span> = callback</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ”¹é€  listen</span></span><br><span class="line">  <span class="title function_">listen</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="comment">// http</span></span><br><span class="line">    <span class="comment">//   .createServer((req, res) =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//     this.callback(req, res)</span></span><br><span class="line">    <span class="comment">//   &#125;)</span></span><br><span class="line">    <span class="comment">//   .listen(...args)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯èƒ½æ˜¯ä¸€ä¸ª å¼‚æ­¥å‡½æ•° å› æ­¤éœ€è¦ async</span></span><br><span class="line">    http</span><br><span class="line">      .<span class="title function_">createServer</span>(<span class="keyword">async</span> (req, res) =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> ctx = <span class="variable language_">this</span>.<span class="title function_">createCtx</span>(req, res)</span><br><span class="line">        <span class="comment">// æ­¤æ—¶å°±å¯ä»¥ç›´æ¥ç»™callbackä¸€ä¸ª ctx</span></span><br><span class="line">        <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">callback</span>(ctx)</span><br><span class="line">        ctx.<span class="property">res</span>.<span class="title function_">end</span>(ctx.<span class="property">body</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">listen</span>(...args)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æŠŠåŸç”Ÿçš„ req å’Œ res æŒ‚è½½åˆ° ctx ä¸Š</span></span><br><span class="line">  <span class="title function_">createCtx</span>(<span class="params">req, res</span>) &#123;</span><br><span class="line">    <span class="comment">// æ¨¡æ‹Ÿ req å’Œ res</span></span><br><span class="line">    <span class="keyword">const</span> ctx = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="variable language_">this</span>.<span class="property">context</span>) <span class="comment">// ç”Ÿæˆ context å¯¹è±¡ï¼Œé‡Œé¢æŒ‚è½½ body å’Œ url</span></span><br><span class="line">    ctx.<span class="property">request</span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="variable language_">this</span>.<span class="property">request</span>) <span class="comment">// æŠŠ request æŒ‚è½½åˆ° ctx ä¸Š</span></span><br><span class="line">    ctx.<span class="property">response</span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="variable language_">this</span>.<span class="property">response</span>) <span class="comment">// æŠŠ response æŒ‚è½½åˆ° ctx ä¸Š</span></span><br><span class="line">    <span class="comment">// æŠŠåŸç”Ÿçš„ req å’Œ res éƒ½æŒ‚è½½åˆ° request å’Œ response ä»¥åŠ ctx ä¸Š</span></span><br><span class="line">    ctx.<span class="property">req</span> = ctx.<span class="property">request</span>.<span class="property">req</span> = req</span><br><span class="line">    ctx.<span class="property">res</span> = ctx.<span class="property">response</span>.<span class="property">res</span> = res</span><br><span class="line">    <span class="keyword">return</span> ctx</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> request = &#123;</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">url</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">req</span>.<span class="property">url</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> response = &#123;</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">body</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_body</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">set</span> <span class="title function_">body</span>(<span class="params">val</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_body</span> = val</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> context = &#123;</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">url</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">request</span>.<span class="property">url</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">body</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">response</span>.<span class="property">body</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">set</span> <span class="title function_">body</span>(<span class="params">val</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">response</span>.<span class="property">body</span> = val</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Â Â Â Â è¿™æ—¶ï¼Œå°±å¯ä»¥é€šè¿‡ ctx æ¥è·å– url äº†:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// server.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">MiniKoa</span> <span class="keyword">from</span> <span class="string">&#x27;./application.js&#x27;</span></span><br><span class="line"><span class="keyword">const</span> port = <span class="number">3000</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">MiniKoa</span>()</span><br><span class="line"><span class="comment">// æ­¤æ—¶å¯ä»¥ä½¿ç”¨ ctx</span></span><br><span class="line">app</span><br><span class="line"> .<span class="title function_">use</span>(<span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line"> ctx.<span class="property">body</span> = <span class="string">&#x27;hello world!&#x27;</span></span><br><span class="line"> &#125;)</span><br><span class="line"> .<span class="title function_">listen</span>(port, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`server is running at http://localhost:<span class="subst">$&#123;port&#125;</span>`</span>)</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure><h2 id="Koaä¸­é—´ä»¶åŠæ´‹è‘±åœˆæ¨¡å‹çš„ç†è§£ä¸å®ç°"><a href="#Koaä¸­é—´ä»¶åŠæ´‹è‘±åœˆæ¨¡å‹çš„ç†è§£ä¸å®ç°" class="headerlink" title="Koaä¸­é—´ä»¶åŠæ´‹è‘±åœˆæ¨¡å‹çš„ç†è§£ä¸å®ç°"></a>Koaä¸­é—´ä»¶åŠæ´‹è‘±åœˆæ¨¡å‹çš„ç†è§£ä¸å®ç°</h2><p>Â Â Â Â koaçš„ä¸­é—´ä»¶æœºåˆ¶æ˜¯ä¸€ä¸ªæ´‹è‘±åœˆæ¨¡å‹ï¼Œé€šè¿‡use()æ³¨å†Œå¤šä¸ªä¸­é—´ä»¶æ”¾å…¥æ•°ç»„ä¸­ï¼Œç„¶åä»å¤–å±‚å¼€å§‹å¾€å†…æ‰§è¡Œï¼Œé‡åˆ°next()åè¿›å…¥ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œå½“æ‰€æœ‰ä¸­é—´ä»¶æ‰§è¡Œå®Œåï¼Œå¼€å§‹è¿”å›ï¼Œä¾æ¬¡æ‰§è¡Œä¸­é—´ä»¶ä¸­æœªæ‰§è¡Œçš„éƒ¨åˆ†ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚</p><p>Â Â Â Â åœ¨å®ç°ä¹‹å‰ï¼Œå…ˆæ¥äº†è§£ä¸€ä¸‹ä¸­é—´ä»¶çš„åŸç†ï¼Œæ ¹æ®ä¸­é—´ä»¶çš„åŸç†å¯çŸ¥ï¼Œè¦å±‚å±‚é€’è¿›æ‰§è¡Œå¤šä¸ªå‡½æ•°ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// test.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">add</span> = (<span class="params">x, y</span>) =&gt; x + y</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">double</span> = (<span class="params">z</span>) =&gt; z * <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> res1 = <span class="title function_">add</span>(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="keyword">const</span> res2 = <span class="title function_">double</span>(res1)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res2)         <span class="comment">// 6</span></span><br></pre></td></tr></table></figure><p>Â Â Â Â ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒæŠŠadd()å‡½æ•°çš„ç»“æœä¼ å…¥double()ä¸­ï¼ŒæŠŠå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿™æ ·æœ€ç»ˆå°±ä¼šå…ˆæ‰§è¡Œadd()ç„¶åæ‰§è¡Œdouble()ï¼Œä¸‹é¢æŠŠè¿™ç§æ¨¡å¼ç¼–å†™æˆä¸€ä¸ªé€šç”¨çš„compose()å‡½æ•°ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// test.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">add</span> = (<span class="params">x, y</span>) =&gt; x + y</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">double</span> = (<span class="params">z</span>) =&gt; z * <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">compose</span> = (<span class="params">middleware</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> res = middleware[<span class="number">0</span>](...args)</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; middleware.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      res = middleware[i](res)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fn = <span class="title function_">compose</span>([add, double])</span><br><span class="line"><span class="keyword">const</span> res = <span class="title function_">fn</span>(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br></pre></td></tr></table></figure><p>Â Â Â Â ä¸Šé¢çš„compose()å‡½æ•°è¿˜æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒæ­¥çš„æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰å¼‚æ­¥çš„ç­‰å¾…ï¼Œå¦‚æœè¦ä½¿ç”¨å¼‚æ­¥ï¼Œç›´æ¥ä½¿ç”¨forå¾ªç¯æ˜¯ä¸è¡Œçš„ï¼Œå®ƒä¸èƒ½ç­‰å¾…å¼‚æ­¥æ‰§è¡Œå®Œæ¯•ã€‚</p><p>Â Â Â Â koa å¯¹å¤–æš´éœ²äº†next()æ–¹æ³•æ¥å®ç°å¼‚æ­¥ç­‰å¾…ï¼Œå®ƒæ˜¯ä¸€ä¸ªPromiseï¼Œå½“æ‰§è¡Œåˆ°å®ƒæ—¶å°±æ‰§è¡Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// test.js</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fn1</span>(<span class="params">next</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fn1&#x27;</span>)</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">next</span>()</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;end fn1&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fn2</span>(<span class="params">next</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fn2&#x27;</span>)</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">delay</span>()</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">next</span>()</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;end fn2&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fn3</span>(<span class="params">next</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fn3&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">delay</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">resolve</span>()</span><br><span class="line">    &#125;, <span class="number">2000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">compose</span>(<span class="params">middleware</span>) &#123;</span><br><span class="line">  <span class="comment">// console.log(middleware)</span></span><br><span class="line">  <span class="comment">// [ [AsyncFunction: fn1], [AsyncFunction: fn2], [AsyncFunction: fn3] ]</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// å…ˆæ‰§è¡Œç¬¬ä¸€ä¸ªå‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">dispatch</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">dispatch</span>(<span class="params">i</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> fn = middleware[i]</span><br><span class="line">      <span class="comment">// å¦‚ä½•ä¸å­˜åœ¨ç›´æ¥è¿”å› Promise</span></span><br><span class="line">      <span class="keyword">if</span> (!fn) <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>()</span><br><span class="line">      <span class="comment">// step1: è¿”å›ä¸€ä¸ª Promiseï¼Œå› æ­¤å•çº¯å˜æˆä¸€ä¸ª Promise ä¸” ç«‹å³æ‰§è¡Œ</span></span><br><span class="line">      <span class="comment">// step2: å¾€å½“å‰ä¸­é—´ä»¶ä¼ å…¥ä¸€ä¸ªnext()æ–¹æ³•ï¼Œå½“è¿™ä¸ªä¸­é—´ä»¶æœ‰æ‰§è¡Œ next çš„æ—¶å€™æ‰æ‰§è¡Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶</span></span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="title function_">fn</span>(<span class="keyword">function</span> <span class="title function_">next</span>(<span class="params"></span>) &#123;</span><br><span class="line">          <span class="comment">// æ‰§è¡Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶</span></span><br><span class="line">          <span class="keyword">return</span> <span class="title function_">dispatch</span>(i + <span class="number">1</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> middleware = [fn1, fn2, fn3]</span><br><span class="line"><span class="keyword">const</span> finalFn = <span class="title function_">compose</span>(middleware)</span><br><span class="line"><span class="title function_">finalFn</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// fn1</span></span><br><span class="line"><span class="comment">// fn2</span></span><br><span class="line"><span class="comment">// ç­‰å¾…ä¸¤ç§’</span></span><br><span class="line"><span class="comment">// fn3</span></span><br><span class="line"><span class="comment">// end fn2</span></span><br><span class="line"><span class="comment">// end fn1</span></span><br></pre></td></tr></table></figure><p>Â Â Â Â ä¸Šé¢å·²ç»å®ç°ä¸€ä¸ªäº†ä¸€ä¸ªç®€å•çš„ä¸­é—´ä»¶ç¤ºä¾‹ï¼Œæ¥ä¸‹æ¥æŠŠå®ƒæ•´åˆåˆ° Application ç±»ä¸­ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// application.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> http <span class="keyword">from</span> <span class="string">&#x27;http&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// this.callback = () =&gt; &#123;&#125;</span></span><br><span class="line">    <span class="comment">// æŠŠ contextã€request å’Œ response æŒ‚è½½åˆ° Application é‡Œé¢</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">context</span> = context</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">request</span> = request</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">response</span> = response</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">middleware</span> = []</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">use</span>(<span class="params">callback</span>) &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ª middleware æ•°ç»„ï¼Œé€šè¿‡ push ä¼ å…¥å¤šä¸ª callback</span></span><br><span class="line">    <span class="comment">// ç„¶åé€šè¿‡ compose æ§åˆ¶æ•´ä¸ª middleware æ‰§è¡Œçš„é¡ºåº</span></span><br><span class="line">    <span class="comment">// æ¯ä¸ª callback å›è°ƒå‡½æ•°ç»™ä¸¤ä¸ªå‚æ•° ç¬¬ä¸€ä¸ªæ˜¯ context ç¬¬äºŒä¸ªæ˜¯ next</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">middleware</span>.<span class="title function_">push</span>(callback)</span><br><span class="line">    <span class="comment">// this.callback = callback</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç›´æ¥æŠŠ compose ç§»æ¤è¿‡æ¥</span></span><br><span class="line">  <span class="title function_">compose</span>(<span class="params">middleware</span>) &#123;</span><br><span class="line">    <span class="comment">// æ¯ä¸ªä¸­é—´ä»¶éœ€è¦ä¸€ä¸ª context</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">context</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">dispatch</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">function</span> <span class="title function_">dispatch</span>(<span class="params">i</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> fn = middleware[i]</span><br><span class="line">        <span class="keyword">if</span> (!fn) <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>()</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¸­é—´ä»¶ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ª contextï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ next()</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(</span><br><span class="line">          <span class="title function_">fn</span>(context, <span class="keyword">function</span> <span class="title function_">next</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">dispatch</span>(i + <span class="number">1</span>)</span><br><span class="line">          &#125;)</span><br><span class="line">        )</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ”¹é€  listen</span></span><br><span class="line">  <span class="title function_">listen</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="comment">// http</span></span><br><span class="line">    <span class="comment">//   .createServer((req, res) =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//     this.callback(req, res)</span></span><br><span class="line">    <span class="comment">//   &#125;)</span></span><br><span class="line">    <span class="comment">//   .listen(...args)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯èƒ½æ˜¯ä¸€ä¸ª å¼‚æ­¥å‡½æ•° å› æ­¤éœ€è¦ async</span></span><br><span class="line">    http</span><br><span class="line">      .<span class="title function_">createServer</span>(<span class="keyword">async</span> (req, res) =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> ctx = <span class="variable language_">this</span>.<span class="title function_">createCtx</span>(req, res)</span><br><span class="line">        <span class="comment">// await this.callback(ctx)</span></span><br><span class="line">        <span class="comment">// è¿™é‡Œä¸èƒ½ç›´æ¥æ‰§è¡Œ callback è€Œæ˜¯å…ˆè·å–ç»è¿‡ compose å¤„ç†åçš„ä¸­é—´ä»¶é›†åˆ</span></span><br><span class="line">        <span class="keyword">const</span> fn = <span class="variable language_">this</span>.<span class="title function_">compose</span>(<span class="variable language_">this</span>.<span class="property">middleware</span>)</span><br><span class="line">        <span class="keyword">await</span> <span class="title function_">fn</span>(ctx)</span><br><span class="line">        ctx.<span class="property">res</span>.<span class="title function_">end</span>(ctx.<span class="property">body</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">listen</span>(...args)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">createCtx</span>(<span class="params">req, res</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> ctx = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">    ctx.<span class="property">request</span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="variable language_">this</span>.<span class="property">request</span>)</span><br><span class="line">    ctx.<span class="property">response</span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="variable language_">this</span>.<span class="property">response</span>)</span><br><span class="line">    ctx.<span class="property">req</span> = ctx.<span class="property">request</span>.<span class="property">req</span> = req</span><br><span class="line">    ctx.<span class="property">res</span> = ctx.<span class="property">response</span>.<span class="property">res</span> = res</span><br><span class="line">    <span class="keyword">return</span> ctx</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> request = &#123;</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">url</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">req</span>.<span class="property">url</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> response = &#123;</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">body</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_body</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">set</span> <span class="title function_">body</span>(<span class="params">val</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_body</span> = val</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> context = &#123;</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">url</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">request</span>.<span class="property">url</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">body</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">response</span>.<span class="property">body</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">set</span> <span class="title function_">body</span>(<span class="params">val</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">response</span>.<span class="property">body</span> = val</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Â Â Â Â æµ‹è¯•å®ƒæ˜¯å¦å¥½ç”¨:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// server.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">MiniKoa</span> <span class="keyword">from</span> <span class="string">&#x27;./application.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> port = <span class="number">3000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">MiniKoa</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">delay</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">resolve</span>()</span><br><span class="line">    &#125;, <span class="number">2000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app</span><br><span class="line">  .<span class="title function_">use</span>(<span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">    ctx.<span class="property">body</span> = <span class="string">&#x27;(fn1) &#x27;</span></span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">next</span>()</span><br><span class="line">    ctx.<span class="property">body</span> += <span class="string">&#x27;(end fn1) &#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">use</span>(<span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">    ctx.<span class="property">body</span> += <span class="string">&#x27;(fn2) &#x27;</span></span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">delay</span>()</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">next</span>()</span><br><span class="line">    ctx.<span class="property">body</span> += <span class="string">&#x27;(end fn2) &#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">use</span>(<span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">    ctx.<span class="property">body</span> += <span class="string">&#x27;(fn3) &#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">listen</span>(port, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`server is running at http://localhost:<span class="subst">$&#123;port&#125;</span>`</span>)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµè§ˆå™¨è¾“å‡ºï¼š(fn1) (fn2) (fn3) (end fn2) (end fn1)</span></span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Â Â Â Â åˆ°æ­¤ä¸ºæ­¢ï¼Œä¸€ä¸ªç®€å•çš„ Koa å°±å®ç°äº†ï¼Œä½†æ˜¯è¿™é‡Œè¿˜ç¼ºå°‘äº†å¼‚å¸¸å¤„ç†ï¼Œæ›´è¯¦ç»†çš„å®ç°æ–¹å¼è¯·æŸ¥çœ‹ Koa æºç ï¼Œæ— éä¹Ÿåªæ˜¯ä¸€äº›å·¥å…·å‡½æ•°ä»¥åŠä¸€äº›åŠŸèƒ½ç‚¹çš„ç»†åŒ–ï¼Œå…¶åŸºæœ¬åŸç†å¤§æ¦‚å°±æ˜¯å¦‚æ­¤äº†ã€‚å…¶ä¸­çš„éš¾ç‚¹æ˜¯ä¸­é—´ä»¶åŸç†ï¼Œé€šè¿‡è¿™ä¸ªä¾‹å­å½»åº•ç†è§£ä¸­é—´ä»¶åŸç†åï¼Œä»¥åå†ä½¿ç”¨èµ·è¿™ä¸ªæ¡†æ¶æ¥ï¼Œå°±æ›´åŠ å¾—å¿ƒåº”æ‰‹äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> typescript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> typescript </tag>
            
            <tag> koa </tag>
            
            <tag> å®ç°åŸç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pokemon-api</title>
      <link href="/uncategorized/pokemon-api/"/>
      <url>/uncategorized/pokemon-api/</url>
      
        <content type="html"><![CDATA[<h1 id="å®å¯æ¢¦ç›¸å…³æ¥å£"><a href="#å®å¯æ¢¦ç›¸å…³æ¥å£" class="headerlink" title="å®å¯æ¢¦ç›¸å…³æ¥å£"></a>å®å¯æ¢¦ç›¸å…³æ¥å£</h1><h2 id="å®å¯æ¢¦åˆ—è¡¨æ¥å£"><a href="#å®å¯æ¢¦åˆ—è¡¨æ¥å£" class="headerlink" title="å®å¯æ¢¦åˆ—è¡¨æ¥å£"></a>å®å¯æ¢¦åˆ—è¡¨æ¥å£</h2><h3 id="æ¥å£åœ°å€"><a href="#æ¥å£åœ°å€" class="headerlink" title="æ¥å£åœ°å€"></a>æ¥å£åœ°å€</h3><p>GET <a href="https://pokemon.fantasticmao.cn/pokemon/list">https://pokemon.fantasticmao.cn/pokemon/list</a></p><h3 id="å‚æ•°è¯´æ˜"><a href="#å‚æ•°è¯´æ˜" class="headerlink" title="å‚æ•°è¯´æ˜"></a>å‚æ•°è¯´æ˜</h3><table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th><th>æ˜¯å¦å¿…å¡«</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td>generation</td><td>int</td><td>ç¬¬å‡ ä¸–ä»£</td><td>1</td><td>å¦</td><td>0ï¼šè¡¨ç¤ºè·å–å…¨éƒ¨ä¸–ä»£çš„å®å¯æ¢¦</td></tr><tr><td>eggGroup</td><td>String</td><td>è›‹ç»„åç§°</td><td>æ¤ç‰©ç¾¤</td><td>å¦</td><td>N&#x2F;Aï¼šè›‹ç»„ä¸å‚ä¸è¿‡æ»¤æ¡ä»¶</td></tr></tbody></table><h3 id="è¿”å›ç»“æœ"><a href="#è¿”å›ç»“æœ" class="headerlink" title="è¿”å›ç»“æœ"></a>è¿”å›ç»“æœ</h3><table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>index</td><td>int</td><td>å…¨å›½å›¾é‰´</td><td>1</td></tr><tr><td>nameZh</td><td>String</td><td>ä¸­æ–‡åç§°</td><td>å¦™è›™ç§å­</td></tr><tr><td>nameJa</td><td>String</td><td>æ—¥æ–‡åç§°</td><td>ãƒ•ã‚·ã‚®ãƒ€ãƒ</td></tr><tr><td>nameEn</td><td>String</td><td>è‹±æ–‡åç§°</td><td>Bulbasaur</td></tr><tr><td>type1</td><td>String</td><td>å±æ€§ 1</td><td>è‰</td></tr><tr><td>type2</td><td>String</td><td>å±æ€§ 2</td><td>æ¯’</td></tr><tr><td>ability1</td><td>String</td><td>ç‰¹æ€§ 1</td><td>èŒ‚ç››</td></tr><tr><td>ability2</td><td>String</td><td>ç‰¹æ€§ 2</td><td></td></tr><tr><td>abilityHide</td><td>String</td><td>éšè—ç‰¹æ€§</td><td>å¶ç»¿ç´ </td></tr><tr><td>generation</td><td>int</td><td>ç¬¬å‡ ä¸–ä»£</td><td>1</td></tr></tbody></table><hr><h2 id="å®å¯æ¢¦è¯¦æƒ…æ¥å£"><a href="#å®å¯æ¢¦è¯¦æƒ…æ¥å£" class="headerlink" title="å®å¯æ¢¦è¯¦æƒ…æ¥å£"></a>å®å¯æ¢¦è¯¦æƒ…æ¥å£</h2><h3 id="æ¥å£åœ°å€-1"><a href="#æ¥å£åœ°å€-1" class="headerlink" title="æ¥å£åœ°å€"></a>æ¥å£åœ°å€</h3><p>GET <a href="https://pokemon.fantasticmao.cn/pokemon/detail">https://pokemon.fantasticmao.cn/pokemon/detail</a></p><h3 id="å‚æ•°è¯´æ˜-1"><a href="#å‚æ•°è¯´æ˜-1" class="headerlink" title="å‚æ•°è¯´æ˜"></a>å‚æ•°è¯´æ˜</h3><table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th><th>æ˜¯å¦å¿…å¡«</th></tr></thead><tbody><tr><td>index</td><td>int</td><td>å…¨å›½å›¾é‰´ç¼–å·</td><td>1</td><td>å¦</td></tr><tr><td>nameZh</td><td>String</td><td>ä¸­æ–‡åç§°ï¼Œæ”¯æŒæ¨¡ç³ŠæŸ¥è¯¢ï¼Œä¾‹å¦‚ã€Œå¦™è›™ã€</td><td>å¦™è›™ç§å­</td><td>å¦</td></tr></tbody></table><h3 id="è¿”å›ç»“æœ-1"><a href="#è¿”å›ç»“æœ-1" class="headerlink" title="è¿”å›ç»“æœ"></a>è¿”å›ç»“æœ</h3><table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>index</td><td>int</td><td>å…¨å›½å›¾é‰´</td><td>1</td></tr><tr><td>nameZh</td><td>String</td><td>ä¸­æ–‡åç§°</td><td>å¦™è›™ç§å­</td></tr><tr><td>nameJa</td><td>String</td><td>æ—¥æ–‡åç§°</td><td>ãƒ•ã‚·ã‚®ãƒ€ãƒ</td></tr><tr><td>nameEn</td><td>String</td><td>è‹±æ–‡åç§°</td><td>Bulbasaur</td></tr><tr><td>type1</td><td>String</td><td>å±æ€§ 1</td><td>è‰</td></tr><tr><td>type2</td><td>String</td><td>å±æ€§ 2</td><td>æ¯’</td></tr><tr><td>ability1</td><td>String</td><td>ç‰¹æ€§ 1</td><td>èŒ‚ç››</td></tr><tr><td>ability2</td><td>String</td><td>ç‰¹æ€§ 2</td><td></td></tr><tr><td>abilityHide</td><td>String</td><td>éšè—ç‰¹æ€§</td><td>å¶ç»¿ç´ </td></tr><tr><td>generation</td><td>int</td><td>ç¬¬å‡ ä¸–ä»£</td><td>1</td></tr><tr><td>baseStat.hp</td><td>int</td><td>HP</td><td>45</td></tr><tr><td>baseStat.attack</td><td>int</td><td>æ”»å‡»</td><td>49</td></tr><tr><td>baseStat.defense</td><td>int</td><td>é˜²å¾¡</td><td>49</td></tr><tr><td>baseStat.spAttack</td><td>int</td><td>ç‰¹æ”»</td><td>65</td></tr><tr><td>baseStat.spDefense</td><td>int</td><td>ç‰¹é˜²</td><td>65</td></tr><tr><td>baseStat.speed</td><td>int</td><td>é€Ÿåº¦</td><td>45</td></tr><tr><td>baseStat.total</td><td>int</td><td>æ€»åˆ</td><td>318</td></tr><tr><td>baseStat.average</td><td>int</td><td>å¹³å‡å€¼</td><td>53</td></tr><tr><td>detail.imgUrl</td><td>String</td><td>é¢„è§ˆå›¾ç‰‡</td><td><a href="https://s1.52poke.wiki/wiki/thumb/2/21/001Bulbasaur.png/300px-001Bulbasaur.png">https://s1.52poke.wiki/wiki/thumb/2/21/001Bulbasaur.png/300px-001Bulbasaur.png</a></td></tr><tr><td>detail.category</td><td>String</td><td>åˆ†ç±»</td><td>ç§å­å®å¯æ¢¦</td></tr><tr><td>detail.height</td><td>String</td><td>èº«é«˜</td><td>0.7m</td></tr><tr><td>detail.weight</td><td>String</td><td>ä½“é‡</td><td>6.9kg</td></tr><tr><td>detail.bodyStyle</td><td>String</td><td>ä½“å‹</td><td><a href="https://s1.52poke.wiki/wiki/c/cc/Body08.png">https://s1.52poke.wiki/wiki/c/cc/Body08.png</a></td></tr><tr><td>detail.catchRate</td><td>String</td><td>æ•è·ç‡</td><td>5.9%</td></tr><tr><td>detail.genderRatio</td><td>String</td><td>æ€§åˆ«æ¯”ä¾‹ï¼Œä»¥é€—å·åˆ†éš”</td><td>é›„æ€§ 87.5%,é›Œæ€§ 12.5%</td></tr><tr><td>detail.eggGroup1</td><td>String</td><td>è›‹ç»„ 1</td><td>æ€ªå…½</td></tr><tr><td>detail.eggGroup2</td><td>String</td><td>è›‹ç»„ 2</td><td>æ¤ç‰©ç¾¤</td></tr><tr><td>detail.hatchTime</td><td>String</td><td>å­µåŒ–æ—¶é—´</td><td>5140 æ­¥</td></tr><tr><td>detail.effortValue</td><td>String</td><td>åŸºç¡€ç‚¹æ•°ï¼Œä»¥é€—å·åˆ†éš”</td><td>ï¼¨ï¼° 0,æ”»å‡» 0,é˜²å¾¡ 0,ç‰¹æ”» 1,ç‰¹é˜² 0,é€Ÿåº¦ 0</td></tr><tr><td>learnSetByLevelingUp.level1</td><td>String</td><td>ç­‰çº§ï¼ˆå¤ªé˜³&#x2F;æœˆäº®ï¼‰</td><td>-</td></tr><tr><td>learnSetByLevelingUp.level2</td><td>String</td><td>ç­‰çº§ï¼ˆç©¶æä¹‹æ—¥&#x2F;ç©¶æä¹‹æœˆï¼‰</td><td>-</td></tr><tr><td>learnSetByLevelingUp.move</td><td>String</td><td>æ‹›å¼åç§°</td><td>æ’å‡»</td></tr><tr><td>learnSetByLevelingUp.type</td><td>String</td><td>å±æ€§</td><td>ä¸€èˆ¬</td></tr><tr><td>learnSetByLevelingUp.category</td><td>String</td><td>åˆ†ç±»</td><td>ç‰©ç†</td></tr><tr><td>learnSetByLevelingUp.power</td><td>String</td><td>å¨åŠ›</td><td>40</td></tr><tr><td>learnSetByLevelingUp.accuracy</td><td>String</td><td>å‘½ä¸­</td><td>100</td></tr><tr><td>learnSetByLevelingUp.pp</td><td>String</td><td>PP</td><td>35</td></tr><tr><td>learnSetByTechnicalMachine.imgUrl</td><td>String</td><td>æ‹›å¼å­¦ä¹ å™¨å›¾ç‰‡é“¾æ¥</td><td><a href="https://s1.52poke.wiki/wiki/e/e3/Bag_TM_%E4%B8%80%E8%88%AC_Sprite.png">https://s1.52poke.wiki/wiki/e/e3/Bag_TM_%E4%B8%80%E8%88%AC_Sprite.png</a></td></tr><tr><td>learnSetByTechnicalMachine.technicalMachine</td><td>String</td><td>æ‹›å¼å­¦ä¹ å™¨åç§°</td><td>æ‹›å¼å­¦ä¹ å™¨ï¼ï¼‘</td></tr><tr><td>learnSetByTechnicalMachine.move</td><td>String</td><td>æ‹›å¼åç§°</td><td>å«å£°</td></tr><tr><td>learnSetByTechnicalMachine.type</td><td>String</td><td>å±æ€§</td><td>ä¸€èˆ¬</td></tr><tr><td>learnSetByTechnicalMachine.category</td><td>String</td><td>åˆ†ç±»</td><td>å˜åŒ–</td></tr><tr><td>learnSetByTechnicalMachine.power</td><td>String</td><td>å¨åŠ›</td><td>-</td></tr><tr><td>learnSetByTechnicalMachine.accuracy</td><td>String</td><td>å‘½ä¸­</td><td>100</td></tr><tr><td>learnSetByTechnicalMachine.pp</td><td>String</td><td>PP</td><td>40</td></tr><tr><td>learnSetByBreeding.parent</td><td>String</td><td>äº²ä»£</td><td>å‘†å‘†å…½,å‘†å£³å…½,å¡æ¯”å…½</td></tr><tr><td>learnSetByBreeding.move</td><td>String</td><td>æ‹›å¼åç§°</td><td>ç¬é—´å¤±å¿†</td></tr><tr><td>learnSetByBreeding.type</td><td>String</td><td>å±æ€§</td><td>è¶…èƒ½åŠ›</td></tr><tr><td>learnSetByBreeding.category</td><td>String</td><td>åˆ†ç±»</td><td>å˜åŒ–</td></tr><tr><td>learnSetByBreeding.power</td><td>String</td><td>å¨åŠ›</td><td>-</td></tr><tr><td>learnSetByBreeding.accuracy</td><td>String</td><td>å‘½ä¸­</td><td>-</td></tr><tr><td>learnSetByBreeding.pp</td><td>String</td><td>PP</td><td>20</td></tr></tbody></table>]]></content>
      
      
      
        <tags>
            
            <tag> api </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nodemon</title>
      <link href="/uncategorized/nodemon/"/>
      <url>/uncategorized/nodemon/</url>
      
        <content type="html"><![CDATA[<p><img src="https://img.isundae.cn/blog/202207180929280.png"></p><p>Â Â Â Â SwapÂ <a href="https://nodemon.io/">nodemon</a>Â instead ofÂ <strong>node</strong>Â to run your code, and now your process will automatically restart when your code changes. To install, getÂ <a href="https://nodejs.org/">Node.js</a>, then from your terminal run:</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p><code>npm install -g nodemon</code></p><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><p>æœ‰ä¸¤ç§é…ç½®æ–¹å¼</p><h2 id="1-åˆ›å»ºnodemon-json"><a href="#1-åˆ›å»ºnodemon-json" class="headerlink" title="1. åˆ›å»ºnodemon.json"></a>1. åˆ›å»ºnodemon.json</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"> <span class="attr">&quot;verbose&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;ignore&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;*.test.js&quot;</span><span class="punctuation">,</span> <span class="string">&quot;fixtures/*&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;execMap&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"> <span class="attr">&quot;rb&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ruby&quot;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;pde&quot;</span><span class="punctuation">:</span> <span class="string">&quot;processing --sketch=&#123;&#123;pwd&#125;&#125; --run&quot;</span></span><br><span class="line"> <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="2-åœ¨package-jsonä¸­"><a href="#2-åœ¨package-jsonä¸­" class="headerlink" title="2. åœ¨package.jsonä¸­"></a>2. åœ¨package.jsonä¸­</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"> <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;nodemon&quot;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;homepage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://nodemon.io&quot;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;...&quot;</span><span class="punctuation">:</span> <span class="string">&quot;... other standard package.json values&quot;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;nodemonConfig&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"> <span class="attr">&quot;ignore&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;test/*&quot;</span><span class="punctuation">,</span> <span class="string">&quot;docs/*&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;delay&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2500&quot;</span></span><br><span class="line"> <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><p><code>nodemon [your app.js]</code></p><h1 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h1><h2 id="hæˆ–-help"><a href="#hæˆ–-help" class="headerlink" title="-hæˆ–-help:"></a>-hæˆ–-help:</h2><p>æŸ¥çœ‹å¸®åŠ©èœå•</p><p><code>nodemon -h</code></p><h2 id="â€“exec"><a href="#â€“exec" class="headerlink" title="â€“exec"></a>â€“exec</h2><p>è¿è¡Œéjsç¨‹åº</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">â— nodemon --<span class="built_in">exec</span> ts-node src/index.ts </span><br><span class="line">// é€šè¿‡ts-nodeè¿è¡Œsrcç›®å½•ä¸‹çš„index.ts</span><br><span class="line"></span><br><span class="line">â— nodemon --<span class="built_in">exec</span> <span class="string">&quot;python -v&quot;</span> ./app.py </span><br><span class="line">// é€šè¿‡verboseæ¨¡å¼çš„pythonè¿è¡Œapp.py</span><br></pre></td></tr></table></figure><p>å¦‚æœç¼–è¯‘çš„æ—¶å€™å¸¦å‚æ•°ï¼Œåˆ™éœ€è¦åŠ â€â€ä½†å¦‚æœæ²¡æœ‰å‚æ•°åˆ™ä¸éœ€è¦â€â€</p><h2 id="â€“ignore"><a href="#â€“ignore" class="headerlink" title="â€“ignore"></a>â€“ignore</h2><p>çƒ­æ›´æ–°æ—¶å¿½ç•¥æŸäº›æ–‡ä»¶&#x2F;ç›®å½•&#x2F;æ–‡ä»¶æ¨¡å¼</p><p><code>nodemon --ignore lib/     å¿½ç•¥libå†…éƒ¨æ–‡ä»¶æ›´æ”¹</code></p><h2 id="â€“watch"><a href="#â€“watch" class="headerlink" title="â€“watch"></a>â€“watch</h2><p>çƒ­æ›´æ–°æ—¶ç›‘è§†æ›´å¤šçš„æ–‡ä»¶ï¼Œè‹¥è¿™äº›è¢«ç›‘è§†çš„æ–‡ä»¶æ›´æ–°ï¼Œåˆ™é¡¹ç›®ä¹Ÿä¼šè¿›è¡Œçƒ­æ›´æ–°</p><p><code>nodemon --watch index.js --watch ./dist/ceshi.js</code></p><p>ä¸€èˆ¬ç”¨äºä¸æ„æˆä¾èµ–å…³ç³»ï¼Œä½†æƒ³è¦ç›‘è§†çš„æ–‡ä»¶ã€‚</p><h2 id="e"><a href="#e" class="headerlink" title="-e"></a>-e</h2><p>å¯ä»¥ä½¿ç”¨-eï¼ˆæˆ–â€“extï¼‰å¼€å…³æŒ‡å®šè‡ªå·±çš„åˆ—è¡¨</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒnodemonæŸ¥æ‰¾ä¸æ–‡ä»¶.jsï¼Œ.mjsï¼Œ.coffeeï¼Œ.litcoffeeï¼Œå’Œ.jsonæ‰©å±•ã€‚</p><p><code>nodemon -e jsï¼Œpug   // ç°åœ¨pugæ–‡ä»¶æ›´æ–°æ—¶ï¼Œä¹Ÿä¼šå¯¼è‡´é¡¹ç›®çƒ­æ›´æ–°äº†</code></p>]]></content>
      
      
      
        <tags>
            
            <tag> nodemon </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello-Hexo</title>
      <link href="/hexo/hello-hexo/"/>
      <url>/hexo/hello-hexo/</url>
      
        <content type="html"><![CDATA[<p><img src="https://img.isundae.cn/blog/202207151615934.png"></p><p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
